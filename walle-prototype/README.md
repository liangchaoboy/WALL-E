# WALL-E 语音导航原型

1天快速开发版本,现已支持 MCP (Model Context Protocol) 架构!

## 🎯 版本说明

- **voice_nav.py** - 原始简化版本 (单一导航功能)
- **voice_nav_mcp.py** - MCP 架构版本 (支持多种工具,可扩展) ⭐ 推荐

## 🚀 快速开始

### 基础版本 (voice_nav.py)

1. 安装依赖:
   ```bash
   pip install -r requirements.txt
   ```

2. 配置 API Key:
   ```bash
   cp .env.example .env
   # 编辑 .env 填入你的 API Key、BASE_URL 和 MODEL
   # 支持 OpenAI、DeepSeek 等任意兼容 OpenAI 接口的服务
   ```

3. 运行:
   ```bash
   python voice_nav.py
   ```

4. 使用:
   - 启动后选择输入模式 (语音/文字)
   - **语音模式**: 对着麦克风说导航指令,例如: "从上海到北京"
   - **文字模式**: 直接输入导航指令,例如: "从上海到北京"
   - 说或输入"退出"结束程序

### MCP 版本 (推荐使用) ⭐

#### 方式一: 简化版 (无需额外依赖)

1. 完成基础设置

2. 测试 MCP 功能:
   ```bash
   python mcp_client_simple.py
   ```

3. 运行简化版语音助手:
   ```bash
   python voice_nav_mcp_simple.py
   ```

#### 方式二: 完整 MCP 协议版 (需要安装 mcp 库)

1. 安装 MCP 库:
   ```bash
   pip install "mcp>=1.0.0"
   ```

2. 测试 MCP 功能:
   ```bash
   python demo_mcp.py
   ```
   
   📖 **详细使用说明**: 查看 [DEMO_MCP_USAGE.md](./DEMO_MCP_USAGE.md) 了解 `demo_mcp.py` 的完整使用指南

3. 运行 MCP 版语音助手:
   ```bash
   python voice_nav_mcp.py
   ```

#### 使用示例:
- 启动后选择输入模式 (语音/文字)
- 支持导航: "从上海到北京"
- 支持天气: "查看明天上海的天气"
- 支持音乐: "播放周杰伦的晴天"
- 说或输入"退出"结束程序

## 系统要求

- Python 3.8+
- 麦克风
- 联网
- macOS/Linux/Windows

## 已知问题

- 需要第三方大模型 API (有成本)
- 语音识别需要网络
- 没有唤醒词
- 只能导航,不支持其他功能

## 功能清单

### 基础版本 (voice_nav.py)
- ✅ 语音输入 (使用 Google 语音识别)
- ✅ 文字输入 (命令行界面)
- ✅ AI 理解 (使用 ChatGPT 或兼容的第三方 API)
- ✅ 地图导航 (打开百度地图)
- ✅ 命令行交互
- ✅ 灵活切换输入模式
- ✅ 基本错误处理

### MCP 版本 ⭐
- ✅ **MCP 架构集成** - 可扩展的工具系统
- ✅ **语音/文字输入** - 灵活选择输入模式
- ✅ **导航工具** - 地图导航、地点搜索 (2个工具)
- ✅ **天气工具** - 天气查询、天气对比 (2个工具)
- ✅ **音乐工具** - 音乐播放、歌单搜索 (2个工具)
- ✅ **插件化设计** - 轻松添加新功能
- ✅ **统一接口** - 标准化的工具调用
- ✅ **简化实现** - 提供无需外部依赖的版本

## Demo 场景

### 语音输入模式
```
$ python voice_nav.py
==================================================
🤖 WALL-E 语音导航原型
==================================================

请选择输入模式:
1. 语音输入 (按回车键)
2. 文字输入 (输入 2)

选择模式 [1]: 

✅ 已启用语音输入模式 - 说话即可导航,说'退出'结束
==================================================

🎤 请说话...
📝 识别: 从上海七牛云到虹桥机场
🤖 AI: {'action': 'nav', 'from': '上海七牛云', 'to': '虹桥机场'}
🗺️  已打开: 上海七牛云 → 虹桥机场

🎤 请说话...
📝 识别: 退出
👋 再见!
```

### 文字输入模式
```
$ python voice_nav.py
==================================================
🤖 WALL-E 语音导航原型
==================================================

请选择输入模式:
1. 语音输入 (按回车键)
2. 文字输入 (输入 2)

选择模式 [1]: 2

✅ 已启用文字输入模式 - 输入导航指令,输入'退出'结束
==================================================

💬 请输入(输入'退出'结束): 从上海七牛云到虹桥机场
📝 输入: 从上海七牛云到虹桥机场
🤖 AI: {'action': 'nav', 'from': '上海七牛云', 'to': '虹桥机场'}
🗺️  已打开: 上海七牛云 → 虹桥机场

💬 请输入(输入'退出'结束): 退出
📝 输入: 退出
👋 再见!
```

## 配置说明

支持任意兼容 OpenAI API 格式的第三方大模型服务:

- `BASE_URL`: 第三方 API 接口地址
  - OpenAI: `https://api.openai.com/v1`
  - DeepSeek: `https://api.deepseek.com/v1`
  - 其他兼容服务的对应地址
- `API_KEY`: 对应的 API 密钥
- `MODEL`: 使用的模型名称 (如: `gpt-3.5-turbo`, `deepseek-chat`, 等)

## 📖 更多文档

- **[DEMO_MCP_USAGE.md](./DEMO_MCP_USAGE.md)** - demo_mcp.py 详细使用说明 ⭐ 新手必读
- **[README_MCP.md](./README_MCP.md)** - MCP 架构详细文档
- **[README_TESTS.md](./README_TESTS.md)** - 测试说明文档
- **[../PRD.md](../PRD.md)** - 完整产品需求文档
- **[../docs/架构设计文档.md](../docs/架构设计文档.md)** - 技术架构设计
- **[../docs/1天快速原型计划.md](../docs/1天快速原型计划.md)** - 原型开发计划
